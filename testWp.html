<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<table id="planner" border="1"></table>

<script>

    let plannerTable = document.getElementById("planner");
    let numberOfRows =19;
    let numberOfColumns = 8;

    tableCreate();

    populateTableHeader();

    populateTableTimeColumn();

    function tableCreate(){

        for(let i = 0; i < numberOfRows; i++){
            let tr = plannerTable.insertRow();
            for(let j = 0; j < numberOfColumns; j++){

                let td = tr.insertCell();

                //css style
                plannerTable.style.border = '1px solid black';
                td.style.width='100px';
                td.style.height = '30px';
                }
            }
    }

    function populateTableHeader() {
        let headerText = ["Hour", "Monday", "Tuesday","Wednesday", "Thursday", "Friday", "Saturday", "Sunday"];
        populateRow(plannerTable, headerText);
    }

    function populateRow(table, rowTexts) {

        for(let i = 0;i<rowTexts.length;i++){
             addCellsText(plannerTable.childNodes[0].childNodes[0], rowTexts[i],i);
        }
    }

    function addCellsText(row, textInCell,i) {

            let text = document.createTextNode(textInCell);
            row.childNodes[i].appendChild(text);

    }

    function populateTableTimeColumn() {
        let timeBegin = 6;
        for (let i = 1;i<=(numberOfRows-1);i++){
            if(timeBegin<10) {
                plannerTable.childNodes[0].childNodes[i].childNodes[0].appendChild(document.createTextNode("0" + timeBegin + ":00"));
                timeBegin++;
            }else{
                plannerTable.childNodes[0].childNodes[i].childNodes[0].appendChild(document.createTextNode( timeBegin + ":00"));
                timeBegin++;
            }
        }
    }

    let jsonData = [

        //for Monday
        {
            "description": "wake up1",
            "dayOfWeek": "Monday",
            "startTime":"06:00"
        },

        {
            "description": "java1",
            "dayOfWeek": "Monday",
            "startTime":"08:00"
        },
        {
            "description": "meditation1",
            "dayOfWeek": "Monday",
            "startTime":"09:00"
        },

        //for Tuesday
        {
            "description": "wake up2",
            "dayOfWeek": "Tuesday",
            "startTime":"06:00"
        },
        {
            "description": "breakfast2",
            "dayOfWeek": "Tuesday",
            "startTime":"07:00"
        },
        {
            "description": "java2",
            "dayOfWeek": "Tuesday",
            "startTime":"08:00"
        },
        {
            "description": "meditation2",
            "dayOfWeek": "Tuesday",
            "startTime":"09:00"
        }
    ]




    function populateTable(table, jsonData) {
        //  let tableContent = JSON.parse(jsonData);


        for (let data of jsonData) {


            if(data.dayOfWeek.includes("Monday")){
                //column number starts from zero
                let columnNumber= 1;
                allocateTaskDescription(data.description, data.startTime,columnNumber);
            }

            if(data.dayOfWeek.includes("Tuesday")){
                //column number starts from zero
                let columnNumber= 2;
                allocateTaskDescription(data.description, data.startTime,columnNumber);
            }
        }
    }

    function allocateTaskDescription(taskDescription, startTime, columnN) {
        //extract hour integer
        let timeDigit = parseInt(startTime.charAt(1));

        //calculate which row the task description will be in
        let rowNumber = timeDigit-5;
        let row = plannerTable.childNodes[0].childNodes[rowNumber];
        addCellsText(row, taskDescription,columnN)
    }


    populateTable(plannerTable, jsonData);



    /*
       function createTableHeader() {
            let headerText = ["Hour", "Monday", "Tuesday"];
            addRow(plannerTable, headerText);



            // for (let headerText of headerTextNodes) {
            //     let th = document.createElement("th");
            //     let day = document.createTextNode(headerText);
            //     th.appendChild(day);
            //     row.appendChild(th);
            // }
        }

        function populateTable(table, jsonData) {
            //  let tableContent = JSON.parse(jsonData);

            createTableHeader();

            let rowContent1 = [];
            let rowContent2 = [];
            for (let data of jsonData) {
                if (data.startDateTime.includes("2021-08-22") && data.startDateTime.includes("06:00")) {
                    rowContent1.push("06:00");
                    rowContent1.push(data.description);
                }

                if (data.startDateTime.includes("2021-08-23") && data.startDateTime.includes("06:00")) {
                    rowContent1.push(data.description);
                }

                if (data.startDateTime.includes("2021-08-22") && data.startDateTime.includes("07:00")) {
                    rowContent2.push("07:00");
                    rowContent2.push(data.description);
                }

                if (data.startDateTime.includes("2021-08-23") && data.startDateTime.includes("07:00")) {
                    rowContent2.push(data.description);
                }

            }
            addRow(table, rowContent1);
            addRow(table,rowContent2);
        }

        function addRow(table, cellsText) {
            console.log(cellsText.length);
            let row = table.insertRow();
          cellsText.forEach(cellText => addCell(row, cellText));

        }

        function addCell(row, contentText) {
            let cell = row.insertCell();
            let text = document.createTextNode(contentText);
            cell.appendChild(text);
        }


        // let jsonData = '[["Hello", "World", "Ireland"],["Ola", "Mundo", "Irlanda"]]';


        let jsonData = [
            {
                "description": "wake up",
                "startDateTime": "2021-08-22 06:00:00"
            },
            {
                "description": "java",
                "startDateTime": "2021-08-22 07:00:00"
            },
            {
                "description": "meditation",
                "startDateTime": "2021-08-23 06:00:00"
            },
            {
                "description": "study finance",
                "startDateTime": "2021-08-23 07:00:00",
            }
        ]


        populateTable(plannerTable, jsonData);*/

</script>

</body>
</html>